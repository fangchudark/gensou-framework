# 変数コマンド

## 概要

変数は値を格納し、ゲームの進行に伴って変化する金銭、HP、時間などの数値を保存するために使用されます。

変数にはさまざまな型があり、異なる型は異なる用途を持っています。

Genscriptには、以下の4種類の変数型があります：文字列、整数、浮動小数点数、ブール値

- **文字列**：  
  文字列型はGenscriptにおけるデフォルトの変数型で、テキスト情報を格納します。例：「こんにちは」、「1+1の結果は2」。  
  数字であっても、文字列変数として格納される場合はテキストとして扱われ、実際の数値ではありません。

- **整数**：  
  整数型は数値型の1つで、金銭、アイテムの数量、時間などの整数値を保存します。  
  Genscriptでは、整数値の範囲は-9223372036854775808から9223372036854775807（両端を含む）です。この範囲を超えた場合、整数型の値は自動的に浮動小数点数型に変換されます。

- **浮動小数点数**：  
  浮動小数点数型は小数点を含む数値型で、HP、移動速度などの非常に大きい値や小数点を含む数値に使用されます。  
  Genscriptでは、浮動小数点数の範囲は非常に広いため、実用範囲内では通常、データのオーバーフローは発生しません。

- **ブール値**：  
  ブール型は特別な変数型で、条件判断に使用されます。値は `false` と `true` の2つだけです。  
  `false` は偽、`true` は真を意味します。

## 構文  

- **[-[変数名]](#変数名)**

- **[-[変数名]=[値]](#変数名値)**

- **[-[変数名]=[有効な数学式]](#変数名有効な数学式)**

## 詳細

### **\-[変数名]**

このコマンドは変数を宣言しますが、初期化は行いません。

初期化されない場合、変数のデフォルト型は文字列であり、その値は空です。

> #### **命名規則**
>
> - 変数名は一意でなければならず、以下の規則に従う必要があります：  
> - アンダースコア以外の記号で始めてはいけません：例）`+varname`（無効な変数名）
>
> - 数字で始めてはいけません：例）`1varname`（無効な変数名）
>
> - 変数名は文字またはアンダースコアで始まる必要があります：例）`_varname`、`変数`（有効な変数名）
>
> - 変数名は文字、アンダースコア、数字を含むことができます：例）`_変数1`、`var_1`、`チルノ９バカ`（有効な変数名）  
>
> - 変数名は予約語やブール値と一致してはいけません：例）`true`、`False`、`TuRe`、`when`（無効な変数名）
>
>> 予約語は小文字のみで、ブール値は大文字小文字を区別しません。
>
> ---
>
> #### **初期化とは？**  
>
> 初期化とは、変数に初期値を設定し、その型と用途を明確にする操作です。

---

### **\-[変数名]=[値]**

このコマンドは変数に値を割り当て、変数の値を変更したり、宣言と同時に初期化したりできます。この値は他の変数でも構いません。

```gs
-a=0    |:変数aを宣言し、0で初期化
-b=a    |:変数bを宣言し、aの値（0）で初期化
-c="c"  |:変数cを宣言し、文字列cで初期化
-b=c    |:cの値をbに代入し、bの値が文字列cに変わる
-@{b}   |:bの値を出力。コンソールには「c」と表示される
```  

> #### **変数の型変換**
> 
> 変数は宣言時に型を指定する必要がなく、代入時に型が自動的に変換されます：
>
> ```gs
> -string="string"         |:文字列型変数を宣言
> -integer=0               |:整数型変数を宣言
> -floating_point=0.0      |:浮動小数点数型変数を宣言
> -boolean=true            |:ブール型変数を宣言
> -boolean=string          |:stringの値をbooleanに代入し、型は文字列に変わる
> -floating_point=integer  |:integerの値をfloating_pointに代入し、型は整数に変わる
> -string=false            |:stringの値をfalseに変更し、型はブールに変わる
> -integer=1.0             |:integerの値を1.0に変更し、型は浮動小数点数に変わる
> ```
>
> ---
>
> #### **文字列代入時に二重引用符は必須ではない**
>
> Genscriptには構文糖があり、存在しない変数を他の変数に代入しようとした場合、値としてその変数名が文字列として代入されます。
> 
> これにより、二重引用符なしで文字列を代入および初期化できます。
>
> ```gs
> -a=a     |:変数aの値は文字列「a」になる
> -b=c     |:変数bの値は文字列「c」になる
> -c={a}   |:変数cの値は文字列「{a}」になる
> -d=""d"" |:変数dの値は文字列「"d"」になる
> ```

---

### **\-[変数名]=[有効な数学式]**

このコマンドは、式の計算結果を変数に割り当て、型を自動変換します：

```gs
-a=10   |:整数型10
-b=5.5  |:浮動小数点数型5.5
-c=a+b  |:浮動小数点数型15.5
-a=b-c  |:整数型-10
```

> #### **数学式とは？**
>
> 数学式は数値を計算するための数式です。例：`1+1`、`10*5`、`10*(90-80)`
>    
> Genscriptの数学式は以下の演算子をサポートしています：
> - `+`（加算）
> - `-`（減算）
> - `*`（乗算）
> - `/`（除算）
> - `%`（剰余）  
>  
> 式には数値型変数を含めることができますが、**宣言されているかつ値が設定されている変数**である必要があります。数値型変数として使用できる型は**整数**および**浮動小数点数**のみです。
>  
> 
> 数式を引用符（`"c+b"`）で囲むと、それが計算されることなく文字列に変換されますが、ほとんどの場合必要ありません。  
>  
> ---
>
> #### **整数オーバーフローの自動変換**
>
> Genscriptでは、式の計算において「シンタックスシュガー」が使用できます。
>
> 整数の変数に整数型の範囲を超えた値を割り当てようとすると、自動的にその変数は浮動小数点数型に変換されます。
>
>> #### **数値範囲**
>>
>> - 整数型：-9223372036854775808 〜 9223372036854775807 （範囲端を含む）
>>  
>> - 浮動小数点型：-1.79769313486237E+308 〜 1.79769313486237E+308 （範囲端を含む）  
>>  
>> 浮動小数点型の範囲は非常に大きいため（最大約1.79769313486237 × 10の308乗）、データのオーバーフローが発生することはほとんどありません。  
>>  
>> なお、Genscriptでは科学記数法を使用して変数に値を代入することはできません。また、Genscriptにおいて大規模な数値データ処理は必要ありません。